apiVersion: v1
kind: ConfigMap
metadata:
  name: minio-sso
  annotations:
    avp.kubernetes.io/remove-missing: "true"
data:
  MINIO_IDENTITY_OPENID_CONFIG_URL: https://sso.ohmlab.fr/realms/<path:secret/data/admin/apps/keycloak#realm>/.well-known/openid-configuration
  MINIO_IDENTITY_OPENID_CLIENT_ID: <path:secret/data/admin/apps/minio#keycloak | jsonPath {.clientId}>
  MINIO_IDENTITY_OPENID_CLIENT_SECRET: <path:secret/data/admin/apps/minio#keycloak | jsonPath {.clientSecret}>
  MINIO_IDENTITY_OPENID_DISPLAY_NAME: Keycloak
  MINIO_IDENTITY_OPENID_SCOPES: openid,profile,email,roles,groups
  MINIO_IDENTITY_OPENID_REDIRECT_URI_DYNAMIC: on
  MINIO_IDENTITY_OPENID_CLAIM_NAME: minio-policy
  MINIO_IDENTITY_OPENID_CLAIM_USERINFO: on
  MINIO_IDENTITY_OPENID_VENDOR: keycloak
  MINIO_IDENTITY_OPENID_KEYCLOAK_REALM: <path:secret/data/admin/apps/keycloak#realm>
  MINIO_IDENTITY_OPENID_KEYCLOAK_ADMIN_URL: https://sso.ohmlab.fr/admin
  MINIO_BROWSER_REDIRECT_URL: https://minio.ohmlab.fr/oauth_callback
