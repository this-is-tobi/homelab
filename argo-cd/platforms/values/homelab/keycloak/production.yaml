keycloak:
  keycloak:
    hostnameAdmin: "https://sso.ohmlab.fr"
    hostname: "https://sso.ohmlab.fr"
    existingSecret: "keycloak-admin"
    secretKeys:
      adminPasswordKey: "password"
  database:
    host: "keycloak-pg-cluster-rw"
    port: "5432"
    name: "keycloak"
    existingSecret: "keycloak-pg-cluster-app"
    secretKeys:
      usernameKey: "username"
      passwordKey: "password"
  ingress:
    hosts:
    - host: "sso.ohmlab.fr"
      paths:
      - path: "/"
        pathType: "Prefix"
    tls:
    - secretName: "sso.ohmlab.fr-tls"
      hosts:
      - "sso.ohmlab.fr"

cnpg:
  mode: "primary"
  credentials:
    existingSecrets:
      enabled: true
      postgres:
        secretName: "keycloak-pg-cluster-admin"
      app:
        secretName: "keycloak-pg-cluster-app"
  backup:
    enabled: true
    endpointURL: "https://s3.fr-par.scw.cloud"
    destinationPath: "s3://ohmlab-backups/cnpg"
    s3Credentials:
      create: false
      secretName: "keycloak-pg-cluster-backup"
      accessKeyId:
        key: "S3_ACCESS_KEY"
      secretAccessKey:
        key: "S3_SECRET_KEY"
      region:
        key: "S3_REGION"

vso:
  vaultStaticSecrets:
    keycloakAdmin:
      mount: "homelab"
      path: "platforms/production/keycloak"
    keycloakConfig:
      mount: "homelab"
      path: "platforms/production/keycloak"
    keycloakDbInfos:
      mount: "homelab"
      path: "platforms/production/keycloak"
    keycloakDbAdmin:
      mount: "homelab"
      path: "platforms/production/keycloak"
    keycloakDbApp:
      mount: "homelab"
      path: "platforms/production/keycloak"
    keycloakPgBackup:
      mount: "homelab"
      path: "platforms/production/keycloak"
    clientGitea:
      mount: "homelab"
      path: "platforms/production/gitea"
    clientGrafana:
      mount: "homelab"
      path: "platforms/production/prometheus-stack"
    clientArgoCd:
      mount: "homelab"
      path: "platforms/production/argo-cd"
    clientMinio:
      mount: "homelab"
      path: "platforms/production/minio"
    clientRustfs:
      mount: "homelab"
      path: "platforms/production/rustfs"
    # clientArgoWorkflows:
    #   mount: "homelab"
    #   path: "platforms/production/argo-workflows"
    # clientCoder:
    #   mount: "homelab"
    #   path: "platforms/production/coder"
    # clientOutline:
    #   mount: "homelab"
    #   path: "platforms/production/outline"
    # clientMLflow:
    #   mount: "homelab"
    #   path: "platforms/production/mlflow"
    # clientSonarQube:
    #   mount: "homelab"
    #   path: "platforms/production/sonarqube"
    # clientHarbor:
    #   mount: "homelab"
    #   path: "platforms/production/harbor"
    # clientVaultwarden:
    #   mount: "homelab"
    #   path: "platforms/production/vaultwarden"
