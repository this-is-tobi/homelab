keycloak:
  keycloak:
    hostnameAdmin: https://<path:secret/data/platforms/production/apps/keycloak#domain>
    hostname: https://<path:secret/data/platforms/production/apps/keycloak#domain>
  database:
    host: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.host}>
    port: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.port}>
    name: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.database}>
    username: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.app.username}>
    password: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.app.password}>
  ingress:
    hosts:
    - host: <path:secret/data/platforms/production/apps/keycloak#domain>
      paths:
      - path: /
        pathType: Prefix
    tls:
    - secretName: <path:secret/data/platforms/production/apps/keycloak#domain>-tls
      hosts:
      - <path:secret/data/platforms/production/apps/keycloak#domain>

cnpg:
  mode: primary
  credentials:
    password: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.app.password}>
    postgresPassword: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.admin.password}>
  backup:
    enabled: true
    endpointURL: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.s3.endpoint}>
    destinationPath: s3://<path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.s3.bucketName}>/<path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.s3.bucketPrefix}>
    s3Credentials:
      accessKeyId:
        value: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.s3.accessKey}>
      secretAccessKey:
        value: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.s3.secretKey}>
      region:
        value: <path:secret/data/platforms/production/apps/keycloak#postgres | jsonPath {.s3.region}>
