argo-cd:
  configs:
    secret:
      argocdServerAdminPassword: <path:secret/data/platforms/production/apps/argo-cd#admin | jsonPath {.password}>
    cm:
      url: https://<path:secret/data/platforms/production/apps/argo-cd#domain>
      oidc.config: |
        name: Keycloak
        issuer: https://<path:secret/data/platforms/production/apps/keycloak#domain>/realms/<path:secret/data/platforms/production/apps/keycloak#extras | jsonPath {.realm}>
        clientID: <path:secret/data/platforms/production/apps/argo-cd#keycloak | jsonPath {.clientId}>
        clientSecret: <path:secret/data/platforms/production/apps/argo-cd#keycloak | jsonPath {.clientSecret}>
        requestedScopes: ["openid", "profile", "email", "groups"]
  notifications:
    enabled: false
    argocdUrl: https://<path:secret/data/platforms/production/apps/argo-cd#domain>
    context:
      provider: self-hosted
      cluster: homelab
      environment: production
    secret:
      create: false
      items:
        mattermost-token: <path:secret/data/platforms/production/apps/argo-cd#notifications | jsonPath {.mattermost.token}>
        email-username: <path:secret/data/platforms/production/apps/argo-cd#smtp | jsonPath {.username}>
        email-password: <path:secret/data/platforms/production/apps/argo-cd#smtp | jsonPath {.password}>
    notifiers:
      service.email: |
        username: $email-username
        password: $email-password
        host: <path:secret/data/platforms/production/apps/argo-cd#smtp | jsonPath {.server}>
        port: <path:secret/data/platforms/production/apps/argo-cd#smtp | jsonPath {.port}>
        from: <path:secret/data/platforms/production/apps/argo-cd#smtp | jsonPath {.email}>
      service.mattermost: |
        apiURL: https://<path:secret/data/platforms/production/apps/mattermost#domain>
        token: $mattermost-token
  applicationSet:
    ingress:
      hostname: appset.<path:secret/data/platforms/production/apps/argo-cd#domain>
  server:
    ingress:
      hostname: <path:secret/data/platforms/production/apps/argo-cd#domain>
  crds:
    install: false
    keep: true
