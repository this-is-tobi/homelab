---
- name: Create keycloak client
  community.general.keycloak_client:
    auth_client_id: admin-cli
    auth_keycloak_url: https://{{ keycloak.domain }}
    auth_realm: master
    auth_username: "{{ keycloak.username }}"
    auth_password: "{{ keycloak.password }}"
    realm: "{{ keycloak.realm }}"
    client_id: "{{ keycloak.clientIds.vault }}"
    name: "{{ keycloak.clientIds.vault }}"
    always_display_in_console: true
    frontchannel_logout: true
    enabled: true
    redirect_uris:
      - https://{{ vault.domain }}/oidc/callback
      - https://{{ vault.domain }}/ui/vault/auth/oidc/oidc/callback
    web_origins:
      - https://{{ vault.domain }}
    standard_flow_enabled: true
    implicit_flow_enabled: false
    direct_access_grants_enabled: true
    clientAuthenticatorType: client-secret
    public_client: false
    protocol: openid-connect
    default_client_scopes:
      - generic
      - groups
    state: present
