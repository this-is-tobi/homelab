applicationSet:
  enabled: true
configs:
  secret:
    argocdServerAdminPassword: {{ argocd.password | password_hash('bcrypt') }}
  params:
    server.insecure: true
  rbac:
    policy.csv: |
      p, role:none, *, *, */*, deny
      p, role:admin, *, *, */*, allow
      g, admin, role:admin
  policy.default: role:none
  scopes: "[groups]"
  cm:
    oidc.config: |
      name: Keycloak
      issuer: https://{{ keycloak.domain }}/realms/{{ keycloak.realm }}
      clientID: {{ argocd.keycloak.clientId }}
      clientSecret: {{ argocd.keycloak.clientSecret }}
      requestedScopes: ["openid", "profile", "email", "groups"]
    url: https://{{ argocd.domain }}
    resource.customizations: |
      networking.k8s.io/Ingress:
        health.lua: |
          hs = {}
          hs.status = "Healthy"
          return hs
dex:
  enabled: false
server:
  ingress:
    enabled: true
    ingressClassName: {{ ingressClassName }}
    hosts:
      - {{ argocd.domain }}
    https: false
    annotations:
      "cert-manager.io/cluster-issuer": le-fabnum-prod
    tls:
      - hosts:
          - {{ argocd.domain }}
        secretName: {{ argocd.domain }}
crds:
  install: false
  keep: true
