- name: Generate random root passphrase
  delegate_to: localhost
  become: false
  ansible.builtin.shell:
    cmd: |
      yq -i '.openvpn.rootPassphrase = "{{ lookup('ansible.builtin.password', '/dev/null', length=24, chars=['ascii_letters', 'digits']) }}"' ./inventory/group_vars/gateway/all.yml
  when: openvpn.rootPassphrase == ""
