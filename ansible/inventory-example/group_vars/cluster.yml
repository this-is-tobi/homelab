---
#---------#
# Cluster #
#---------#

# k3s version
k3s_version: v1.27.1+k3s1

# k3s_token is required  masters can talk together securely this token should be alpha numeric only
k3s_token: ""

# systemd directory
systemd_dir: /etc/systemd/system

# interface which will be used for flannel
flannel_iface: eth0

# apiserver_endpoint is haproxy loadbalancer ip-address which will be configured on each master
apiserver_endpoint: "{{ hostvars[groups['gateway'][0]]['ansible_host'] }}"

# master node ip address
master_ip: "{{ hostvars[groups['masters'][0]]['ansible_host'] }}"

# node ip address
node_ip: "{{ ansible_facts[flannel_iface]['ipv4']['address'] }}"

# extra args to pass to both master and worker nodes
extra_args: >-
  --node-name {{ inventory_hostname }} 
  --node-ip={{ node_ip }}
  --prefer-bundled-bin 
  --flannel-iface {{ flannel_iface }}

# extra args to pass to master nodes
extra_server_args: >-
  {{ extra_args }} 
  --tls-san {{ apiserver_endpoint }}
  --disable local-storage 
  --write-kubeconfig-mode 644 
  --node-taint node-role.kubernetes.io/master=true:NoSchedule 
  --node-label node-type=master
# --disable servicelb 

# extra args to pass to worker nodes
extra_agent_args: >-
  {{ extra_args }} 
  --node-label node-type=worker

# extra args to pass if longhorn need to create disk (cf. inventory hosts)
extra_storage_args: ""


#----------#
# Services #
#----------#

# argocd
argocd_domain: argocd.{{ root_url }}
argocd_username: admin
argocd_password: password-to-change

# cert-manager
email: email-to-change@email.com

# grafana
grafana_domain: grafana.{{ root_url }}
grafana_username: admin
grafana_password: password-to-change

# kubernetes-dashboard
kubernetes_dashboard_domain: console.{{ root_url }}
kubernetes_dashboard_token: ""

# longhorn
longhorn_domain: longhorn.{{ local_root_url }}

# metallb
# metal_lb_ip_address_pool: 192.168.0.200-192.168.0.250

# minio
minio_domain: minio.{{ root_url }}
minio_api_domain: api.minio.{{ root_url }}
minio_username: admin
minio_password: password-to-change

# harbor
harbor_domain: registry.{{ root_url }}
harbor_username: admin
harbor_password: password-to-change

# test-deployment
test_domain: test.{{ root_url }}

# traefik
traefik_domain: traefik.{{ local_root_url }}
