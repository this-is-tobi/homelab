---
#---------#
# cluster #
#---------#

# k3s version
k3s_version: v1.27.1+k3s1

# k3s_token is required  masters can talk together securely this token should be alpha numeric only
k3s_token: ""

# systemd directory
systemd_dir: /etc/systemd/system

# interface which will be used for flannel
flannel_iface: eth0

# apiserver_endpoint is haproxy loadbalancer ip-address which will be configured on each master
apiserver_endpoint: "{{ hostvars[groups['gateway'][0]]['ansible_host'] }}"

# master node ip address
master_ip: "{{ hostvars[groups['masters'][0]]['ansible_host'] }}"

# node ip address
node_ip: "{{ ansible_facts[flannel_iface]['ipv4']['address'] }}"

# extra args to pass to both master and worker nodes
extra_args: >-
  --node-name {{ inventory_hostname }} 
  --node-ip={{ node_ip }}
  --prefer-bundled-bin 
  --flannel-iface {{ flannel_iface }}

# extra args to pass to master nodes
extra_server_args: >-
  {{ extra_args }} 
  --tls-san {{ apiserver_endpoint }}
  --disable local-storage 
  --write-kubeconfig-mode 644 
  --node-taint node-role.kubernetes.io/master=true:NoSchedule 
  --node-label node-type=master

# extra args to pass to worker nodes
extra_agent_args: >-
  {{ extra_args }} 
  --node-label node-type=worker

# extra args to pass if longhorn need to create disk (cf. inventory hosts)
extra_storage_args: ""


#--------#
# argocd #
#--------#

argocd_domain: gitops.{{ root_domain }}

argocd_username: admin

argocd_password: ""


#--------------#
# cert-manager #
#--------------#

email: your@email.com


#---------#
# grafana #
#---------#

grafana_domain: monitoring.{{ root_domain }}

grafana_username: admin

grafana_password: ""


#--------#
# harbor #
#--------#

harbor_domain: registry.{{ root_domain }}

harbor_username: admin

harbor_password: ""

harbor_projects:
  - project_name: robots
    metadata:
      public: "true"
      storage_limit: -1
      auto_scan: "true"

harbor_robots: 
  - name: world
    description: Robot that build the world
    expires_at: -1
    permissions:
      - kind: project
        namespace: robots
        access:
          - action: list
            resource: repository
          - action: pull
            resource: repository
          - action: push
            resource: repository
          - action: delete
            resource: repository
          - action: read
            resource: artifact
          - action: list
            resource: artifact
          - action: delete
            resource: artifact
          - action: create
            resource: artifact-label
          - action: delete
            resource: artifact-label
          - action: create
            resource: tag
          - action: delete
            resource: tag
          - action: list
            resource: tag
          - action: create
            resource: scan
          - action: stop
            resource: scan


#----------#
# keycloak #
#----------#

keycloak_domain: sso.{{ root_domain }}

keycloak_username: admin

keycloak_password: ""

keycloak_realm: homelab

harbor_client_id: harbor


#----------------------#
# kubernetes-dashboard #
#----------------------#

kubernetes_dashboard_domain: console.{{ root_domain }}

kubernetes_dashboard_token: ""


#----------#
# longhorn #
#----------#

longhorn_domain: longhorn.{{ local_root_domain }}


#-------#
# minio #
#-------#

minio_domain: s3.{{ root_domain }}

minio_api_domain: api.s3.{{ root_domain }}

minio_username: admin

minio_password: ""


#---------#
# traefik #
#---------#

traefik_domain: traefik.{{ local_root_domain }}


#---------------------#
# Additional services #
#---------------------#

# docs
docs_domain: github.com/this-is-tobi/homelab

# test-deployment
test_domain: test.{{ root_domain }}
